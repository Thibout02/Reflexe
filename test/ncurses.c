#include "my_ncurses.h"
#include <wiringPi.h>

// DÃ©finition des 16 formes converties depuis matrice_led.c
char patterns[16][8][8] = {
    { // CARRE_GRAND
        {'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'}
    },
    { // CARRE_PETIT
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', 'x', 'x', 'x', 'x', ' ', ' '},
        {' ', ' ', 'x', ' ', ' ', 'x', ' ', ' '},
        {' ', ' ', 'x', ' ', ' ', 'x', ' ', ' '},
        {' ', ' ', 'x', 'x', 'x', 'x', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '}
    },
    { // RECTANGLE_VERTICAL
        {' ', ' ', 'x', 'x', 'x', 'x', ' ', ' '},
        {' ', ' ', 'x', ' ', ' ', 'x', ' ', ' '},
        {' ', ' ', 'x', ' ', ' ', 'x', ' ', ' '},
        {' ', ' ', 'x', ' ', ' ', 'x', ' ', ' '},
        {' ', ' ', 'x', ' ', ' ', 'x', ' ', ' '},
        {' ', ' ', 'x', ' ', ' ', 'x', ' ', ' '},
        {' ', ' ', 'x', ' ', ' ', 'x', ' ', ' '},
        {' ', ' ', 'x', 'x', 'x', 'x', ' ', ' '}
    },
    { // RECTANGLE_HORIZONTAL
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '}
    },
    { // TRIANGLE_HAUT
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', 'x', 'x', 'x', 'x', ' ', ' '},
        {' ', 'x', 'x', 'x', 'x', 'x', 'x', ' '},
        {'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '}
    },
    { // TRIANGLE_BAS
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'},
        {' ', 'x', 'x', 'x', 'x', 'x', 'x', ' '},
        {' ', ' ', 'x', 'x', 'x', 'x', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '}
    },
    { // TRIANGLE_GAUCHE
        {' ', ' ', 'x', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', 'x', 'x', ' ', ' ', ' ', ' '},
        {' ', ' ', 'x', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', 'x', 'x', 'x', 'x', ' ', ' '},
        {' ', ' ', 'x', 'x', 'x', 'x', ' ', ' '},
        {' ', ' ', 'x', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', 'x', 'x', ' ', ' ', ' ', ' '},
        {' ', ' ', 'x', ' ', ' ', ' ', ' ', ' '}
    },
    { // TRIANGLE_DROITE
        {' ', ' ', ' ', ' ', ' ', 'x', ' ', ' '},
        {' ', ' ', ' ', ' ', 'x', 'x', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', 'x', ' ', ' '},
        {' ', ' ', 'x', 'x', 'x', 'x', ' ', ' '},
        {' ', ' ', 'x', 'x', 'x', 'x', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', 'x', ' ', ' '},
        {' ', ' ', ' ', ' ', 'x', 'x', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', 'x', ' ', ' '}
    },
    { // CERCLE
        {' ', ' ', 'x', 'x', 'x', 'x', ' ', ' '},
        {' ', 'x', ' ', ' ', ' ', ' ', 'x', ' '},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {' ', 'x', ' ', ' ', ' ', ' ', 'x', ' '},
        {' ', ' ', 'x', 'x', 'x', 'x', ' ', ' '}
    },
    { // LOSANGE
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', 'x', ' ', ' ', 'x', ' ', ' '},
        {' ', 'x', ' ', ' ', ' ', ' ', 'x', ' '},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {' ', 'x', ' ', ' ', ' ', ' ', 'x', ' '},
        {' ', ' ', 'x', ' ', ' ', 'x', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '}
    },
    { // BARRE_OBLIQUE_GAUCHE
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', 'x', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', 'x', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', 'x', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', 'x', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', 'x', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', 'x', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', 'x'}
    },
    { // BARRE_OBLIQUE_DROITE
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {' ', ' ', ' ', ' ', ' ', ' ', 'x', ' '},
        {' ', ' ', ' ', ' ', ' ', 'x', ' ', ' '},
        {' ', ' ', ' ', ' ', 'x', ' ', ' ', ' '},
        {' ', ' ', ' ', 'x', ' ', ' ', ' ', ' '},
        {' ', ' ', 'x', ' ', ' ', ' ', ' ', ' '},
        {' ', 'x', ' ', ' ', ' ', ' ', ' ', ' '},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', ' '}
    },
    { // CROIX
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'},
        {' ', 'x', ' ', ' ', ' ', ' ', 'x', ' '},
        {' ', ' ', 'x', ' ', ' ', 'x', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', 'x', ' ', ' ', 'x', ' ', ' '},
        {' ', 'x', ' ', ' ', ' ', ' ', 'x', ' '},
        {'x', ' ', ' ', ' ', ' ', ' ', ' ', 'x'}
    },
    { // LIGNE_HORIZONTALE
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'},
        {'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '}
    },
    { // LIGNE_VERTICALE
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '}
    },
    { // PLUS
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'},
        {'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '},
        {' ', ' ', ' ', 'x', 'x', ' ', ' ', ' '}
    }
};

void test_ncurses() {
    // Initialisation de ncurses
    init_ncurses();

    // Dessine la grille
    draw_grid();

    // Affiche tous les motifs un par un
    int i;
    for (i = 0; i < 16; i++) {
        display_pattern(i/4, i%4, patterns[i]);
        refresh_display();
        delay(500);
    }

    delay(5000);


    // Nettoyage de ncurses
    cleanup_ncurses();
}

int main() {
    test_ncurses();
    return 0;
}
